<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API FETCH</title>
</head>

<body>

    <script>


        fetch('https://jsonplaceholder.typicode.com/posts')
            .then(response => response.json())
            .then(json => console.log(json))

        console.log("Bonjour..................................")


        fetch('https://jsonplaceholder.typicode.com/posts/', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ title: 'Mon titre', body: 'Mon contenu', userId: 1 })
        })


        fetch('https://jsonplaceholder.typicode.com/posts/' + id, {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ title: 'Mon titre', body: 'Mon contenu', userId: 1 })
        })


        fetch('https://jsonplaceholder.typicode.com/posts/' + id, {
            method: 'DELETE'
        })


    </script>


    <!-- 

Cours Complet sur l'API Fetch en JavaScript
Introduction
L'API Fetch est une interface moderne et puissante en JavaScript permettant de faire des requêtes HTTP de manière simple et flexible. Elle remplace avantageusement XMLHttpRequest en offrant une syntaxe plus propre et en utilisant les Promises.
1. Syntaxe de base
L'API Fetch utilise la fonction fetch() qui prend en paramètre une URL et retourne une Promise qui se résout en un objet Response.
fetch('https://api.example.com/data')
  .then(response => response.json()) // Convertit la réponse en JSON
  .then(data => console.log(data))
  .catch(error => console.error('Erreur:', error));
2. Gestion des requêtes HTTP
2.1 Requête GET
Par défaut, fetch() effectue une requête GET.
fetch('https://jsonplaceholder.typicode.com/posts')
  .then(response => response.json())
  .then(data => console.log(data))
  .catch(error => console.error('Erreur:', error));
2.2 Requête POST
Pour envoyer des données, il faut utiliser la méthode POST avec des options supplémentaires.
fetch('https://jsonplaceholder.typicode.com/posts', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({ title: 'Mon titre', body: 'Mon contenu', userId: 1 })
})
  .then(response => response.json())
  .then(data => console.log(data))
  .catch(error => console.error('Erreur:', error));
2.3 Requête PUT
La méthode PUT est utilisée pour mettre à jour une ressource existante.
fetch('https://jsonplaceholder.typicode.com/posts/1', {
  method: 'PUT',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({ title: 'Titre mis à jour', body: 'Contenu mis à jour', userId: 1 })
})
  .then(response => response.json())
  .then(data => console.log(data))
  .catch(error => console.error('Erreur:', error));
2.4 Requête DELETE
La méthode DELETE permet de supprimer une ressource.
fetch('https://jsonplaceholder.typicode.com/posts/1', {
  method: 'DELETE'
})
  .then(response => {
    if (response.ok) {
      console.log('Suppression réussie');
    }
  })
  .catch(error => console.error('Erreur:', error));
3. Gestion des erreurs
L'API Fetch ne rejette pas une Promise en cas de réponse HTTP avec un code d'erreur (ex : 404 ou 500). Il faut vérifier response.ok.
fetch('https://api.example.com/data')
  .then(response => {
    if (!response.ok) {
      throw new Error(`Erreur HTTP: ${response.status}`);
    }
    return response.json();
  })
  .then(data => console.log(data))
  .catch(error => console.error('Erreur:', error));
4. Utilisation avec async/await
L'API Fetch peut être utilisée avec async/await pour une syntaxe plus lisible.
async function fetchData() {
  try {
    let response = await fetch('https://jsonplaceholder.typicode.com/posts');
    if (!response.ok) {
      throw new Error(`Erreur HTTP: ${response.status}`);
    }
    let data = await response.json();
    console.log(data);
  } catch (error) {
    console.error('Erreur:', error);
  }
}

fetchData();
5. Options avancées
5.1 Ajout de paramètres dans l'URL
Les paramètres peuvent être ajoutés directement dans l'URL.
const params = new URLSearchParams({ userId: 1 });
fetch(`https://jsonplaceholder.typicode.com/posts?${params}`)
  .then(response => response.json())
  .then(data => console.log(data))
  .catch(error => console.error('Erreur:', error));
5.2 Gestion du timeout
L'API Fetch ne gère pas nativement le timeout, mais on peut utiliser AbortController.
const controller = new AbortController();
const signal = controller.signal;

setTimeout(() => controller.abort(), 5000); // Annule la requête après 5 secondes

fetch('https://jsonplaceholder.typicode.com/posts', { signal })
  .then(response => response.json())
  .then(data => console.log(data))
  .catch(error => console.error('Requête annulée ou erreur:', error));
Conclusion
L'API Fetch est un outil puissant et flexible pour effectuer des requêtes HTTP en JavaScript. Elle remplace XMLHttpRequest et permet une manipulation aisée des réponses avec les Promises et async/await. En comprenant les concepts abordés ici, vous serez capable d'effectuer des appels API efficaces dans vos applications web.






-->

</body>

</html>